import{a as A}from"./chunk-6QSMJCUJ.js";import{a as F}from"./chunk-VHTBEU7Y.js";import{b as T,c as H,d as O,e as k,f as $,g as w,o as L}from"./chunk-EQG5L6AV.js";import{$a as l,Ca as R,Ha as s,Oa as o,R as x,Ra as i,Sa as n,Ta as _,Ya as p,Z as I,_ as C,_a as S,ab as c,bb as f,eb as y,fb as d,gb as v,hb as E,ib as b,ra as h,ta as r}from"./chunk-VEP5YUMW.js";var M=t=>["/release",t],P=t=>["/release",t,"edit"];function U(t,a){t&1&&(i(0,"ul",9)(1,"li",10)(2,"a",11),_(3,"img",12),i(4,"h2",13),l(5,"Favorites"),n()()(),i(6,"li",10)(7,"a",14),_(8,"img",15),i(9,"h2",13),l(10,"Recently Played"),n()()()())}function D(t,a){if(t&1&&(i(0,"span",27),l(1),n()),t&2){let e=a.$implicit;r(),c(e)}}function N(t,a){if(t&1&&(i(0,"div",25),s(1,D,2,1,"span",26),n()),t&2){let e=p().$implicit;r(),o("ngForOf",e.musicTags)}}function z(t,a){if(t&1&&(i(0,"li",16)(1,"div",17),_(2,"img",18),i(3,"div",19)(4,"h4",20),l(5),n(),i(6,"p",21),l(7),d(8,"titlecase"),n(),i(9,"p",22),l(10),d(11,"date"),n(),i(12,"p",23),l(13),n(),s(14,N,2,1,"div",24),n()()()),t&2){let e=a.$implicit;r(2),o("src",e.coverImageUrl,h)("alt",e.title+" cover"),r(3),c(e.title),r(2),c(v(8,7,e.type)),r(3),c(E(11,9,e.releaseDate,"shortDate")),r(3),c(e.description),r(),o("ngIf",e.musicTags&&e.musicTags.length>0)}}function j(t,a){if(t&1&&(i(0,"div",5),s(1,U,11,0,"ul",6),i(2,"h3"),l(3,"Recent Releases"),n(),i(4,"ul",7),s(5,z,15,12,"li",8),d(6,"async"),n()()),t&2){let e,m=p(2);r(),o("ngIf",((e=m.authService.getCurrentUser())==null?null:e.role)=="listener"),r(4),o("ngForOf",v(6,2,m.recentReleases$))}}function V(t,a){if(t&1&&(i(0,"span",27),l(1),n()),t&2){let e=a.$implicit;r(),c(e)}}function W(t,a){if(t&1&&(i(0,"div",25),s(1,V,2,1,"span",26),n()),t&2){let e=p().$implicit;r(),o("ngForOf",e.musicTags)}}function G(t,a){if(t&1&&(i(0,"li",16)(1,"div",17),_(2,"img",18),i(3,"div",19)(4,"h4",20),l(5),n(),i(6,"p",21),l(7),d(8,"titlecase"),n(),i(9,"p",36),l(10),n(),i(11,"p",22),l(12),d(13,"date"),n(),i(14,"p",23),l(15),n(),s(16,W,2,1,"div",24),i(17,"p",37),l(18),n()(),i(19,"div",38)(20,"a",39),l(21,"View"),n(),i(22,"a",40),l(23,"Edit"),n()()()()),t&2){let e=a.$implicit;r(2),o("src",e.coverImageUrl,h)("alt",e.title+" cover"),r(3),c(e.title),r(2),c(v(8,11,e.type)),r(3),f("Version: ",e.version,""),r(2),c(E(13,13,e.releaseDate,"shortDate")),r(3),c(e.description),r(),o("ngIf",e.musicTags&&e.musicTags.length>0),r(2),f("",e.trackIds.length||0," tracks"),r(2),o("routerLink",y(16,M,e.id)),r(2),o("routerLink",y(18,P,e.id))}}function Z(t,a){if(t&1&&(i(0,"ul",7),s(1,G,24,20,"li",8),n()),t&2){let e=p().ngIf;r(),o("ngForOf",e)}}function q(t,a){if(t&1&&(i(0,"div"),s(1,Z,2,1,"ul",35),n()),t&2){let e=a.ngIf;p();let m=S(16);r(),o("ngIf",e.length>0)("ngIfElse",m)}}function J(t,a){t&1&&(i(0,"p"),l(1,"No releases found. "),n())}function K(t,a){if(t&1&&(i(0,"div",28)(1,"h2"),l(2,"Artist Dashboard"),n(),_(3,"br"),i(4,"nav",29)(5,"a",30),I(),i(6,"svg",31),_(7,"path",32),n(),C(),i(8,"span"),l(9,"New Release"),n()()(),i(10,"div",33)(11,"h3"),l(12,"My Releases"),n(),s(13,q,2,2,"div",34),d(14,"async"),s(15,J,2,0,"ng-template",null,0,b),n()()),t&2){let e=S(16),m=p(2);r(13),o("ngIf",v(14,2,m.artistReleases$))("ngIfElse",e)}}function Q(t,a){if(t&1&&(i(0,"div")(1,"div")(2,"h3"),l(3),n(),s(4,j,7,4,"div",3)(5,K,17,4,"div",4),n()()),t&2){let e,m,g,u=p();r(3),f("Welcome, ",(e=u.authService.getCurrentUser())==null?null:e.username,""),r(),o("ngIf",u.recentReleases$&&((m=u.authService.getCurrentUser())==null?null:m.role)=="listener"),r(),o("ngIf",((g=u.authService.getCurrentUser())==null?null:g.role)==="artist")}}function X(t,a){t&1&&(i(0,"div")(1,"h2"),l(2,"Admin Dashboard"),n(),i(3,"p"),l(4,"Manage users and content."),n()())}function Y(t,a){if(t&1&&(i(0,"div")(1,"h1",41),l(2),n(),i(3,"h2"),l(4,"Welcome"),n(),i(5,"p"),l(6,"Please enter your credentials or create an account."),n(),i(7,"a",42),l(8,"Login"),n(),_(9,"br"),i(10,"a",43),l(11,"Register"),n()()),t&2){let e=p();r(2),c(e.title)}}var B=class t{title="BLARE";authService=x(F);releaseService=x(A);artistReleases$=null;recentReleases$=null;hasReleases$=null;ngOnInit(){if(console.log("ngOnInit called"),this.authService.isAuthenticated()){let a=this.authService.getCurrentUser();console.log("Current user:",a),a?.role==="artist"?(console.log("Loading releases for artist:",a.id),this.artistReleases$=this.releaseService.getReleasesByArtist(a.id),this.artistReleases$.subscribe({next:e=>console.log("Artist releases loaded:",e),error:e=>console.error("Error loading artist releases:",e)})):a?.role==="listener"&&(console.log("Loading recent releases for listener"),this.recentReleases$=this.releaseService.getRecentReleases(),this.recentReleases$.subscribe({next:e=>console.log("Recent releases loaded:",e),error:e=>console.error("Error loading recent releases:",e)}))}}getArtistReleases(a){return this.releaseService.getReleasesByArtist(a)}constructor(){console.log(this.authService.getCurrentUser()?.role)}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=R({type:t,selectors:[["app-home"]],decls:6,vars:7,consts:[["noReleases",""],[1,"container"],[4,"ngIf"],["id","home_listener_container",4,"ngIf"],["id","home_artist_container",4,"ngIf"],["id","home_listener_container"],["id","home_list",4,"ngIf"],[1,"releases-list"],["class","release-item",4,"ngFor","ngForOf"],["id","home_list"],[1,"home-item"],["routerLink","/user/zackmorgenthaler/playlist/favorites",1,"home-item-link"],["alt","Favorites cover","src","/img/covers/starred-cover.svg",1,"cover"],[1,"home-item-title"],["routerLink","/user/zackmorgenthaler/playlist/recently-played",1,"home-item-link"],["alt","Recently Played cover","src","/img/covers/recently-played-cover.svg",1,"cover"],[1,"release-item"],[1,"release-info"],[1,"release-cover",3,"src","alt"],[1,"release-details"],[1,"release-title"],[1,"release-type"],[1,"release-date"],[1,"release-description"],["class","release-tags",4,"ngIf"],[1,"release-tags"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],["id","home_artist_container"],["id","artist_home_nav"],["routerLink","/artist/releases/new",1,"btn"],["xmlns","http://www.w3.org/2000/svg","height","24px","viewBox","0 -960 960 960","width","24px","fill","currentColor"],["d","M440-440H200v-80h240v-240h80v240h240v80H520v240h-80v-240Z"],["id","home_artist_releases"],[4,"ngIf","ngIfElse"],["class","releases-list",4,"ngIf","ngIfElse"],[1,"release-version"],[1,"track-count"],[1,"release-actions"],[1,"btn",3,"routerLink"],[1,"btn","btn-secondary",3,"routerLink"],[1,"logo"],["routerLink","/login",1,"btn"],["routerLink","/register",1,"btn","btn-secondary"]],template:function(e,m){if(e&1&&(i(0,"div",1),s(1,Q,6,3,"div",2),d(2,"async"),s(3,X,5,0,"div",2)(4,Y,12,1,"div",2),d(5,"async"),n()),e&2){let g;r(),o("ngIf",v(2,3,m.authService.isAuthenticated$)),r(2),o("ngIf",((g=m.authService.getCurrentUser())==null?null:g.role)=="admin"),r(),o("ngIf",!v(5,5,m.authService.isAuthenticated$))}},dependencies:[w,T,H,O,k,$,L],styles:["#home_list[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:start;flex-wrap:wrap;list-style-type:none;padding:0;gap:1rem}.home-item-link[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;box-shadow:2px 0 1rem #00000040;padding:.5rem;text-decoration:none;border-radius:.5rem}.home-item[_ngcontent-%COMP%]   .cover[_ngcontent-%COMP%]{width:125px;height:125px}.home-item-title[_ngcontent-%COMP%]{text-align:center;font-weight:500;color:#f1f1f1;margin-top:.75rem;margin-bottom:.5rem;font-size:.75rem}"]})};export{B as HomeComponent};
