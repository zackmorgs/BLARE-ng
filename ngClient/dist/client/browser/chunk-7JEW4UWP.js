import{a as w,b as p,c as y,d as b,e as I,f as x,g as F,h as T,i as N,j as L,l as q,m as M}from"./chunk-E7MIS4QH.js";import{a as R}from"./chunk-VHTBEU7Y.js";import{c as S,g as h,n as C,o as E}from"./chunk-EQG5L6AV.js";import{$a as s,Ca as f,Ha as m,Oa as o,Pa as c,R as g,Ra as n,Sa as r,Ta as u,Xa as v,Ya as d,bb as _,ta as l}from"./chunk-VEP5YUMW.js";function G(e,a){e&1&&(n(0,"span"),s(1,"Username is required"),r())}function D(e,a){e&1&&(n(0,"span"),s(1,"Username must be at least 3 characters"),r())}function A(e,a){if(e&1&&(n(0,"div",16),m(1,G,2,0,"span",14)(2,D,2,0,"span",14),r()),e&2){let i=d();l(),o("ngIf",i.username==null||i.username.errors==null?null:i.username.errors.required),l(),o("ngIf",i.username==null||i.username.errors==null?null:i.username.errors.minlength)}}function V(e,a){e&1&&(n(0,"span"),s(1,"Email is required"),r())}function U(e,a){e&1&&(n(0,"span"),s(1,"Please enter a valid email"),r())}function k(e,a){if(e&1&&(n(0,"div",16),m(1,V,2,0,"span",14)(2,U,2,0,"span",14),r()),e&2){let i=d();l(),o("ngIf",i.email==null||i.email.errors==null?null:i.email.errors.required),l(),o("ngIf",i.email==null||i.email.errors==null?null:i.email.errors.email)}}function O(e,a){e&1&&(n(0,"span"),s(1,"Role is required"),r())}function j(e,a){if(e&1&&(n(0,"div",16),m(1,O,2,0,"span",14),r()),e&2){let i=d();l(),o("ngIf",i.role==null||i.role.errors==null?null:i.role.errors.required)}}function B(e,a){e&1&&(n(0,"span"),s(1,"Password is required"),r())}function z(e,a){e&1&&(n(0,"span"),s(1,"Password must be at least 6 characters"),r())}function H(e,a){if(e&1&&(n(0,"div",16),m(1,B,2,0,"span",14)(2,z,2,0,"span",14),r()),e&2){let i=d();l(),o("ngIf",i.password==null||i.password.errors==null?null:i.password.errors.required),l(),o("ngIf",i.password==null||i.password.errors==null?null:i.password.errors.minlength)}}function J(e,a){if(e&1&&(n(0,"div",16),s(1),r()),e&2){let i=d();l(),_(" ",i.errorMessage," ")}}function K(e,a){e&1&&(n(0,"span"),s(1,"Creating account..."),r())}function Q(e,a){e&1&&(n(0,"span"),s(1,"Register"),r())}var P=class e{fb=g(q);authService=g(R);router=g(C);registerForm;isLoading=!1;errorMessage="";constructor(){this.registerForm=this.fb.group({username:["",[p.required,p.minLength(3)]],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],role:["",[p.required]]})}onSubmit(){this.registerForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.register(this.registerForm.value).subscribe({next:a=>{this.isLoading=!1,this.router.navigate(["/account"])},error:a=>{this.isLoading=!1,this.errorMessage=a.error?.message||"Registration failed. Please try again."}}))}get username(){return this.registerForm.get("username")}get email(){return this.registerForm.get("email")}get password(){return this.registerForm.get("password")}get role(){return this.registerForm.get("role")}static \u0275fac=function(i){return new(i||e)};static \u0275cmp=f({type:e,selectors:[["app-register"]],decls:31,vars:15,consts:[[1,"register-container"],[1,"register-form","container"],[3,"ngSubmit","formGroup"],[1,"form-group"],["type","text","id","username","formControlName","username","autocomplete","true","placeholder","Username",1,"text-input"],["class","error-message",4,"ngIf"],["type","email","id","email","formControlName","email","autocomplete","true","placeholder","Email",1,"text-input"],["id","role_input",1,"form-group"],["id","role","formControlName","role",1,"text-input"],["value","","disabled","","selected",""],["value","listener"],["value","artist"],["type","password","id","password","formControlName","password","autocomplete","true","placeholder","Password",1,"text-input"],["type","submit",1,"btn",3,"disabled"],[4,"ngIf"],["routerLink","/login",1,"btn"],[1,"error-message"]],template:function(i,t){i&1&&(n(0,"div",0)(1,"div",1)(2,"h2"),s(3,"Register"),r(),u(4,"br"),n(5,"form",2),v("ngSubmit",function(){return t.onSubmit()}),n(6,"div",3),u(7,"input",4),m(8,A,3,2,"div",5),r(),n(9,"div",3),u(10,"input",6),m(11,k,3,2,"div",5),r(),n(12,"div",7)(13,"select",8)(14,"option",9),s(15,"Select Role"),r(),n(16,"option",10),s(17,"Listener"),r(),n(18,"option",11),s(19,"Artist"),r()(),m(20,j,2,1,"div",5),r(),n(21,"div",3),u(22,"input",12),m(23,H,3,2,"div",5),r(),m(24,J,2,1,"div",5),n(25,"button",13),m(26,K,2,0,"span",14)(27,Q,2,0,"span",14),r()(),u(28,"br"),n(29,"a",15),s(30,"Login"),r()()()),i&2&&(l(5),o("formGroup",t.registerForm),l(2),c("error",(t.username==null?null:t.username.invalid)&&(t.username==null?null:t.username.touched)),l(),o("ngIf",(t.username==null?null:t.username.invalid)&&(t.username==null?null:t.username.touched)),l(2),c("error",(t.email==null?null:t.email.invalid)&&(t.email==null?null:t.email.touched)),l(),o("ngIf",(t.email==null?null:t.email.invalid)&&(t.email==null?null:t.email.touched)),l(9),o("ngIf",(t.role==null?null:t.role.invalid)&&(t.role==null?null:t.role.touched)),l(2),c("error",(t.password==null?null:t.password.invalid)&&(t.password==null?null:t.password.touched)),l(),o("ngIf",(t.password==null?null:t.password.invalid)&&(t.password==null?null:t.password.touched)),l(),o("ngIf",t.errorMessage),l(),o("disabled",t.registerForm.invalid||t.isLoading),l(),o("ngIf",t.isLoading),l(),o("ngIf",!t.isLoading))},dependencies:[h,S,M,I,N,L,w,T,y,b,x,F,E],encapsulation:2})};export{P as RegisterComponent};
