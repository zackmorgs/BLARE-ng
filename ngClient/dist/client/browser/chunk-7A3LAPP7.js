import{a as b,b as u,c as E,d as F,e as I,f as x,g as T,l as N,m as M}from"./chunk-E7MIS4QH.js";import{a as y}from"./chunk-VHTBEU7Y.js";import{c as h,g as L,l as S,n as C,o as w}from"./chunk-EQG5L6AV.js";import{$a as l,Ca as f,Ha as m,Oa as s,Pa as c,R as p,Ra as i,Sa as r,Ta as d,Xa as v,Ya as g,bb as _,ta as o}from"./chunk-VEP5YUMW.js";function q(e,a){if(e&1&&(i(0,"div",10),l(1),r()),e&2){let t=g();o(),_(" ",t.errorMessage," ")}}function G(e,a){e&1&&(i(0,"span"),l(1,"Username is required"),r())}function D(e,a){e&1&&(i(0,"span"),l(1,"Username must be at least 3 characters"),r())}function R(e,a){if(e&1&&(i(0,"div",10),m(1,G,2,0,"span",8)(2,D,2,0,"span",8),r()),e&2){let t=g();o(),s("ngIf",t.username==null||t.username.errors==null?null:t.username.errors.required),o(),s("ngIf",t.username==null||t.username.errors==null?null:t.username.errors.minlength)}}function U(e,a){e&1&&(i(0,"span"),l(1,"Password is required"),r())}function A(e,a){e&1&&(i(0,"span"),l(1,"Password must be at least 6 characters"),r())}function V(e,a){if(e&1&&(i(0,"div",10),m(1,U,2,0,"span",8)(2,A,2,0,"span",8),r()),e&2){let t=g();o(),s("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.required),o(),s("ngIf",t.password==null||t.password.errors==null?null:t.password.errors.minlength)}}function k(e,a){e&1&&(i(0,"span"),l(1,"Logging in..."),r())}function j(e,a){e&1&&(i(0,"span"),l(1,"Login"),r())}var P=class e{fb=p(N);authService=p(y);router=p(C);route=p(S);loginForm;isLoading=!1;errorMessage="";constructor(){this.loginForm=this.fb.group({username:["",[u.required,u.minLength(3)]],password:["",[u.required,u.minLength(6)]]})}onSubmit(){this.loginForm.valid&&(this.isLoading=!0,this.errorMessage="",this.authService.login(this.loginForm.value).subscribe({next:a=>{this.isLoading=!1;let t=this.route.snapshot.queryParams.returnUrl||"/account";this.router.navigate([t])},error:a=>{this.isLoading=!1,this.errorMessage=a.error?.message||"Login failed. Please try again."}}))}get username(){return this.loginForm.get("username")}get password(){return this.loginForm.get("password")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=f({type:e,selectors:[["app-login"]],decls:20,vars:11,consts:[[1,"login-container"],[1,"login-form","container"],[3,"ngSubmit","formGroup"],["class","error-message",4,"ngIf"],[1,"form-group"],["type","text","id","username","formControlName","username","autocomplete","true","placeholder","Username",1,"text-input"],["type","password","id","password","formControlName","password","autocomplete","true","placeholder","Password",1,"text-input"],["type","submit",1,"btn",3,"disabled"],[4,"ngIf"],["routerLink","/register",1,"btn","btn-secondary"],[1,"error-message"]],template:function(t,n){t&1&&(i(0,"div",0)(1,"div",1)(2,"h2"),l(3,"Log In"),r(),i(4,"p"),l(5,"Please enter your credentials to access your account."),r(),i(6,"form",2),v("ngSubmit",function(){return n.onSubmit()}),m(7,q,2,1,"div",3),i(8,"div",4),m(9,R,3,2,"div",3),d(10,"input",5),r(),i(11,"div",4),m(12,V,3,2,"div",3),d(13,"input",6),r(),i(14,"button",7),m(15,k,2,0,"span",8)(16,j,2,0,"span",8),r()(),d(17,"br"),i(18,"a",9),l(19,"Register here"),r()()()),t&2&&(o(6),s("formGroup",n.loginForm),o(),s("ngIf",n.errorMessage),o(2),s("ngIf",(n.username==null?null:n.username.invalid)&&(n.username==null?null:n.username.touched)),o(),c("error",(n.username==null?null:n.username.invalid)&&(n.username==null?null:n.username.touched)),o(2),s("ngIf",(n.password==null?null:n.password.invalid)&&(n.password==null?null:n.password.touched)),o(),c("error",(n.password==null?null:n.password.invalid)&&(n.password==null?null:n.password.touched)),o(),s("disabled",n.loginForm.invalid||n.isLoading),o(),s("ngIf",n.isLoading),o(),s("ngIf",!n.isLoading))},dependencies:[L,h,M,I,b,E,F,x,T,w],encapsulation:2})};export{P as LoginComponent};
