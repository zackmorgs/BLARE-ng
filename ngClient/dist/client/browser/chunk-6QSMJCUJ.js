import{i as o}from"./chunk-EQG5L6AV.js";import{I as a,L as c,R as u,i as p}from"./chunk-VEP5YUMW.js";var g=class n{http=u(o);apiUrl="http://localhost:5051/api/release";releasesSubject=new p([]);releases$=this.releasesSubject.asObservable();getAllReleases(){return this.http.get(this.apiUrl).pipe(a(e=>this.releasesSubject.next(e)))}getReleaseById(e){return this.http.get(`${this.apiUrl}/artist/${e}`)}getReleasesByArtist(e){return this.http.get(`${this.apiUrl}/artist/${e}`)}getReleasesByType(e){return this.http.get(`${this.apiUrl}/type/${e}`)}searchReleases(e){return this.http.get(`${this.apiUrl}/search?q=${encodeURIComponent(e)}`)}createRelease(e){return this.http.post(this.apiUrl,e).pipe(a(t=>{let r=this.releasesSubject.value;this.releasesSubject.next([...r,t])}))}updateRelease(e,t){return this.http.put(`${this.apiUrl}/${e}`,t).pipe(a(r=>{let s=this.releasesSubject.value,i=s.findIndex(l=>l.id===e);i!==-1&&(s[i]=r,this.releasesSubject.next([...s]))}))}deleteRelease(e){return this.http.delete(`${this.apiUrl}/${e}`).pipe(a(()=>{let r=this.releasesSubject.value.filter(s=>s.id!==e);this.releasesSubject.next(r)}))}addTrackToRelease(e,t){return this.http.post(`${this.apiUrl}/${e}/tracks`,{trackId:t}).pipe(a(r=>{let s=this.releasesSubject.value,i=s.findIndex(l=>l.id===e);i!==-1&&(s[i]=r,this.releasesSubject.next([...s]))}))}removeTrackFromRelease(e,t){return this.http.delete(`${this.apiUrl}/${e}/tracks/${t}`).pipe(a(r=>{let s=this.releasesSubject.value,i=s.findIndex(l=>l.id===e);i!==-1&&(s[i]=r,this.releasesSubject.next([...s]))}))}getRecentReleases(){return this.http.get(`${this.apiUrl}/`)}getFeaturedReleases(){return this.http.get(`${this.apiUrl}/featured`)}uploadCoverImage(e,t){let r=new FormData;return r.append("coverImage",t),this.http.post(`${this.apiUrl}/${e}/cover`,r)}refreshReleases(){this.getAllReleases().subscribe()}clearCache(){this.releasesSubject.next([])}getReleasesCountByArtist(e){return this.http.get(`${this.apiUrl}/artist/${e}/count`)}validateRelease(e){let t=[];return"title"in e&&(!e.title||e.title.trim().length===0)&&t.push("Title is required"),"type"in e&&e.type&&!["album","single","ep"].includes(e.type)&&t.push("Invalid release type. Must be album, single, or ep"),"releaseDate"in e&&e.releaseDate&&new Date(e.releaseDate)>new Date&&t.push("Release date cannot be in the future"),t}static \u0275fac=function(t){return new(t||n)};static \u0275prov=c({token:n,factory:n.\u0275fac,providedIn:"root"})};export{g as a};
